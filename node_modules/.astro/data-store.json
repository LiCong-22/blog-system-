[["Map",1,2,9,10],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.16.6","content-config-digest","f78b0b9bd4352641","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://your-name.vercel.app\",\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{},\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"math\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"dracula\",\"themes\":{},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[],\"rehypePlugins\":[],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true,\"allowedDomains\":[]},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false,\"failOnPrerenderConflict\":false,\"svgo\":false},\"legacy\":{\"collections\":false}}","posts",["Map",11,12,39,40,71,72,119,120,148,149,189,190,237,238,271,272],"2026-01-04-测试文章",{"id":11,"data":13,"body":21,"filePath":22,"digest":23,"rendered":24,"legacyId":38},{"title":14,"description":15,"pubDate":16,"updatedDate":17,"tags":18},"测试文章","测试 MCP 发布功能",["Date","2026-01-04T00:00:00.000Z"],["Date","2026-01-04T00:00:00.000Z"],[19,20],"测试","MCP","这是通过 MCP 创建的测试文章。\n\n## 测试要点\n\n1. MCP 功能正常\n2. GitHub 集成成功\n3. 自动化流程可用","src/content/posts/2026-01-04-测试文章.md","502a985e16385b18",{"html":25,"metadata":26},"\u003Cp>这是通过 MCP 创建的测试文章。\u003C/p>\n\u003Ch2 id=\"测试要点\">测试要点\u003C/h2>\n\u003Col>\n\u003Cli>MCP 功能正常\u003C/li>\n\u003Cli>GitHub 集成成功\u003C/li>\n\u003Cli>自动化流程可用\u003C/li>\n\u003C/ol>",{"headings":27,"localImagePaths":31,"remoteImagePaths":32,"frontmatter":33,"imagePaths":37},[28],{"depth":29,"slug":30,"text":30},2,"测试要点",[],[],{"title":14,"description":15,"pubDate":34,"updatedDate":35,"tags":36},["Date","2026-01-04T00:00:00.000Z"],["Date","2026-01-04T00:00:00.000Z"],[19,20],[],"2026-01-04-测试文章.md","welcome",{"id":39,"data":41,"body":48,"filePath":49,"digest":50,"rendered":51,"legacyId":70},{"title":42,"description":43,"pubDate":44,"tags":45},"欢迎来到我的博客","这是博客的第一篇文章，介绍博客的用途和未来规划。",["Date","2025-12-25T00:00:00.000Z"],[46,47],"博客","介绍","# 欢迎\r\n\r\n这是我的新博客！\r\n\r\n## 博客用途\r\n\r\n1. **记录对话** - 总结每天与 AI 的讨论\r\n2. **分享笔记** - 技术学习笔记和思考\r\n3. **自动化** - 通过 MCP 实现自动发布\r\n\r\n## 技术栈\r\n\r\n- **Astro** - 静态站点生成器\r\n- **Vercel** - 免费托管\r\n- **MCP** - 自动化发布工具\r\n\r\n## 开始使用\r\n\r\n期待在这里分享更多内容！","src/content/posts/welcome.md","e7139b336c4c402b",{"html":52,"metadata":53},"\u003Ch1 id=\"欢迎\">欢迎\u003C/h1>\n\u003Cp>这是我的新博客！\u003C/p>\n\u003Ch2 id=\"博客用途\">博客用途\u003C/h2>\n\u003Col>\n\u003Cli>\u003Cstrong>记录对话\u003C/strong> - 总结每天与 AI 的讨论\u003C/li>\n\u003Cli>\u003Cstrong>分享笔记\u003C/strong> - 技术学习笔记和思考\u003C/li>\n\u003Cli>\u003Cstrong>自动化\u003C/strong> - 通过 MCP 实现自动发布\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"技术栈\">技术栈\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Cstrong>Astro\u003C/strong> - 静态站点生成器\u003C/li>\n\u003Cli>\u003Cstrong>Vercel\u003C/strong> - 免费托管\u003C/li>\n\u003Cli>\u003Cstrong>MCP\u003C/strong> - 自动化发布工具\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"开始使用\">开始使用\u003C/h2>\n\u003Cp>期待在这里分享更多内容！\u003C/p>",{"headings":54,"localImagePaths":64,"remoteImagePaths":65,"frontmatter":66,"imagePaths":69},[55,58,60,62],{"depth":56,"slug":57,"text":57},1,"欢迎",{"depth":29,"slug":59,"text":59},"博客用途",{"depth":29,"slug":61,"text":61},"技术栈",{"depth":29,"slug":63,"text":63},"开始使用",[],[],{"title":42,"description":43,"pubDate":67,"tags":68},["Date","2025-12-25T00:00:00.000Z"],[46,47],[],"welcome.md","2026-01-04-mcp-架构解析ai-如何调用自定义工具",{"id":71,"data":73,"body":82,"filePath":83,"digest":84,"rendered":85,"legacyId":118},{"title":74,"description":75,"pubDate":76,"updatedDate":77,"tags":78},"MCP 架构解析：AI 如何调用自定义工具","解析 MCP 协议如何让 AI 调用自定义工具，包括架构设计和代码实现。",["Date","2026-01-04T00:00:00.000Z"],["Date","2026-01-04T00:00:00.000Z"],[20,79,80,81],"AI","技术架构","Python","# MCP 架构解析：AI 如何调用自定义工具\n\n之前有朋友问我，MCP 是怎么让 AI 调用我写的 Python 代码的？今天来详细讲讲。\n\n## MCP 是什么？\n\nMCP (Model Context Protocol) 是一个让 AI 模型能够调用外部工具的协议标准。\n\n## 工作流程\n\n```\nAI 模型 (Claude)\n       │\n       │ 识别需要调用工具\n       ▼\nMCP Client (Claude Code CLI)\n       │ stdin/stdout 通信\n       ▼\nMCP Server (Python)\n       │ 执行代码\n       ▼\nGitHub → Vercel 部署\n```\n\n![MCP 架构图](/mcp-architecture.jpg)\n\n## 核心代码\n\n### 1. 定义工具\n\n```python\n@server.list_tools()\nasync def list_tools() -> list[Tool]:\n    return [\n        Tool(\n            name='create_blog_post',\n            description='创建博客文章',\n            inputSchema={\n                'type': 'object',\n                'properties': {\n                    'title': {'type': 'string'},\n                    'content': {'type': 'string'},\n                    'tags': {'type': 'array'}\n                }\n            }\n        )\n    ]\n```\n\n### 2. 调用工具\n\n```python\n@server.call_tool()\nasync def call_tool(name, arguments):\n    if name == 'create_blog_post':\n        result = create_blog_post(\n            title=arguments['title'],\n            content=arguments['content'],\n            tags=arguments.get('tags', [])\n        )\n        return f'博客已创建: {result}'\n```\n\n## 我的实现\n\n我写了一个简单的 MCP Server，包含：\n\n- **blog_tool.py** - 博客发布核心逻辑\n  - 创建 Markdown 文件\n  - 执行 Git 提交推送\n\n- **server.py** - MCP 协议层\n  - 声明可用工具\n  - 处理工具调用请求\n\n## 使用效果\n\n对话变成博客的完整流程：\n\n1. 用户说：\"帮我把这段对话总结成博客\"\n2. AI 识别意图，调用 `create_blog_post` 工具\n3. MCP Server 接收请求，自动：\n   - 生成带日期的 Markdown 文件\n   - 写入 `src/content/posts/`\n   - 提交到 GitHub\n4. Vercel 自动部署\n5. 返回博客链接\n\n整个过程 AI 自动完成，我只需要专注于内容！\n\n## 总结\n\nMCP 的核心价值：**让 AI 能够执行你定义的任意代码逻辑**。\n\n无论是发布博客、操作数据库、调用 API，只要写好 Python 函数，AI 就能调用它。","src/content/posts/2026-01-04-mcp-架构解析ai-如何调用自定义工具.md","fb6a0e59c3571fc1",{"html":86,"metadata":87},"\u003Ch1 id=\"mcp-架构解析ai-如何调用自定义工具\">MCP 架构解析：AI 如何调用自定义工具\u003C/h1>\n\u003Cp>之前有朋友问我，MCP 是怎么让 AI 调用我写的 Python 代码的？今天来详细讲讲。\u003C/p>\n\u003Ch2 id=\"mcp-是什么\">MCP 是什么？\u003C/h2>\n\u003Cp>MCP (Model Context Protocol) 是一个让 AI 模型能够调用外部工具的协议标准。\u003C/p>\n\u003Ch2 id=\"工作流程\">工作流程\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>AI 模型 (Claude)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       │ 识别需要调用工具\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>MCP Client (Claude Code CLI)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       │ stdin/stdout 通信\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>MCP Server (Python)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       │ 执行代码\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>GitHub → Vercel 部署\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cimg src=\"/mcp-architecture.jpg\" alt=\"MCP 架构图\">\u003C/p>\n\u003Ch2 id=\"核心代码\">核心代码\u003C/h2>\n\u003Ch3 id=\"1-定义工具\">1. 定义工具\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">@server.list_tools\u003C/span>\u003Cspan style=\"color:#F8F8F2\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">async\u003C/span>\u003Cspan style=\"color:#FF79C6\"> def\u003C/span>\u003Cspan style=\"color:#50FA7B\"> list_tools\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() \u003C/span>\u003Cspan style=\"color:#FF79C6\">->\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> list[Tool]:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">    return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        Tool(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            name\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            description\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">创建博客文章\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            inputSchema\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">object\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">properties\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">title\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">tags\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">array\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">                }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">            }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        )\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    ]\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"2-调用工具\">2. 调用工具\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">@server.call_tool\u003C/span>\u003Cspan style=\"color:#F8F8F2\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">async\u003C/span>\u003Cspan style=\"color:#FF79C6\"> def\u003C/span>\u003Cspan style=\"color:#50FA7B\"> call_tool\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">name\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">arguments\u003C/span>\u003Cspan style=\"color:#F8F8F2\">):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> name \u003C/span>\u003Cspan style=\"color:#FF79C6\">==\u003C/span>\u003Cspan style=\"color:#E9F284\"> '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        result \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> create_blog_post(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            title\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">arguments[\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">title\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            content\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">arguments[\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">],\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            tags\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">arguments.get(\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">tags\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, [])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        )\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">        return\u003C/span>\u003Cspan style=\"color:#FF79C6\"> f\u003C/span>\u003Cspan style=\"color:#F1FA8C\">'博客已创建: \u003C/span>\u003Cspan style=\"color:#BD93F9\">{\u003C/span>\u003Cspan style=\"color:#F8F8F2\">result\u003C/span>\u003Cspan style=\"color:#BD93F9\">}\u003C/span>\u003Cspan style=\"color:#F1FA8C\">'\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"我的实现\">我的实现\u003C/h2>\n\u003Cp>我写了一个简单的 MCP Server，包含：\u003C/p>\n\u003Cul>\n\u003Cli>\n\u003Cp>\u003Cstrong>blog_tool.py\u003C/strong> - 博客发布核心逻辑\u003C/p>\n\u003Cul>\n\u003Cli>创建 Markdown 文件\u003C/li>\n\u003Cli>执行 Git 提交推送\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\n\u003Cp>\u003Cstrong>server.py\u003C/strong> - MCP 协议层\u003C/p>\n\u003Cul>\n\u003Cli>声明可用工具\u003C/li>\n\u003Cli>处理工具调用请求\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"使用效果\">使用效果\u003C/h2>\n\u003Cp>对话变成博客的完整流程：\u003C/p>\n\u003Col>\n\u003Cli>用户说：“帮我把这段对话总结成博客”\u003C/li>\n\u003Cli>AI 识别意图，调用 \u003Ccode>create_blog_post\u003C/code> 工具\u003C/li>\n\u003Cli>MCP Server 接收请求，自动：\n\u003Cul>\n\u003Cli>生成带日期的 Markdown 文件\u003C/li>\n\u003Cli>写入 \u003Ccode>src/content/posts/\u003C/code>\u003C/li>\n\u003Cli>提交到 GitHub\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Vercel 自动部署\u003C/li>\n\u003Cli>返回博客链接\u003C/li>\n\u003C/ol>\n\u003Cp>整个过程 AI 自动完成，我只需要专注于内容！\u003C/p>\n\u003Ch2 id=\"总结\">总结\u003C/h2>\n\u003Cp>MCP 的核心价值：\u003Cstrong>让 AI 能够执行你定义的任意代码逻辑\u003C/strong>。\u003C/p>\n\u003Cp>无论是发布博客、操作数据库、调用 API，只要写好 Python 函数，AI 就能调用它。\u003C/p>",{"headings":88,"localImagePaths":111,"remoteImagePaths":112,"frontmatter":113,"imagePaths":117},[89,91,94,96,98,102,105,107,109],{"depth":56,"slug":90,"text":74},"mcp-架构解析ai-如何调用自定义工具",{"depth":29,"slug":92,"text":93},"mcp-是什么","MCP 是什么？",{"depth":29,"slug":95,"text":95},"工作流程",{"depth":29,"slug":97,"text":97},"核心代码",{"depth":99,"slug":100,"text":101},3,"1-定义工具","1. 定义工具",{"depth":99,"slug":103,"text":104},"2-调用工具","2. 调用工具",{"depth":29,"slug":106,"text":106},"我的实现",{"depth":29,"slug":108,"text":108},"使用效果",{"depth":29,"slug":110,"text":110},"总结",[],[],{"title":74,"description":75,"pubDate":114,"updatedDate":115,"tags":116},["Date","2026-01-04T00:00:00.000Z"],["Date","2026-01-04T00:00:00.000Z"],[20,79,80,81],[],"2026-01-04-mcp-架构解析ai-如何调用自定义工具.md","2026-01-05-加密测试文章",{"id":119,"data":121,"body":128,"filePath":129,"digest":130,"rendered":131,"legacyId":147},{"title":122,"description":123,"pubDate":124,"tags":125,"password":127},"加密测试文章","测试密码保护功能",["Date","2026-01-05T00:00:00.000Z"],[19,126],"加密","lc8814","# 加密测试\r\n\r\n这是一篇加密测试文章。\r\n\r\n## 测试内容\r\n\r\n如果能看到这篇文章，说明密码输入正确。\r\n\r\n## 功能说明\r\n\r\n- 前端密码验证\r\n- 解锁后自动保存状态","src/content/posts/2026-01-05-加密测试文章.md","e4716a38c219ca44",{"html":132,"metadata":133},"\u003Ch1 id=\"加密测试\">加密测试\u003C/h1>\n\u003Cp>这是一篇加密测试文章。\u003C/p>\n\u003Ch2 id=\"测试内容\">测试内容\u003C/h2>\n\u003Cp>如果能看到这篇文章，说明密码输入正确。\u003C/p>\n\u003Ch2 id=\"功能说明\">功能说明\u003C/h2>\n\u003Cul>\n\u003Cli>前端密码验证\u003C/li>\n\u003Cli>解锁后自动保存状态\u003C/li>\n\u003C/ul>",{"headings":134,"localImagePaths":141,"remoteImagePaths":142,"frontmatter":143,"imagePaths":146},[135,137,139],{"depth":56,"slug":136,"text":136},"加密测试",{"depth":29,"slug":138,"text":138},"测试内容",{"depth":29,"slug":140,"text":140},"功能说明",[],[],{"title":122,"description":123,"pubDate":144,"tags":145,"password":127},["Date","2026-01-05T00:00:00.000Z"],[19,126],[],"2026-01-05-加密测试文章.md","2026-01-05-博客目录结构",{"id":148,"data":150,"body":158,"filePath":159,"digest":160,"rendered":161,"legacyId":188},{"title":151,"description":152,"pubDate":153,"tags":154,"password":127},"博客文件目录结构","内部文档：博客系统目录结构说明",["Date","2026-01-05T00:00:00.000Z"],[155,156,157],"内部","文档","目录结构","# 博客系统目录结构\r\n\r\n## 根目录结构\r\n\r\n```\r\nblog-system/\r\n├── src/                 # 源代码目录\r\n│   ├── content/         # 内容配置\r\n│   │   └── posts/       # 博客文章 (Markdown)\r\n│   ├── layouts/         # 页面布局\r\n│   ├── pages/           # 页面路由\r\n│   ├── components/      # 组件\r\n│   └── styles/          # 样式\r\n├── public/              # 静态资源\r\n├── mcp-server/          # MCP 自动发布工具\r\n├── astro.config.mjs     # Astro 配置\r\n└── package.json\r\n```\r\n\r\n## 关键目录说明\r\n\r\n### `src/content/posts/`\r\n- 存放所有博客文章\r\n- 使用 Markdown 格式\r\n- 支持 frontmatter 元数据（标题、日期、标签、密码等）\r\n\r\n### `mcp-server/`\r\n- MCP (Model Context Protocol) 自动发布工具\r\n- 用于快速创建和发布博客文章\r\n\r\n## 发布流程\r\n\r\n1. 本地开发：`npm run dev`\r\n2. 构建生产：`npm run build`\r\n3. 提交 GitHub → Vercel 自动部署\r\n\r\n## 常用 Git 命令\r\n\r\n```bash\r\ngit add .\r\ngit commit -m \"描述\"\r\ngit push\r\n```","src/content/posts/2026-01-05-博客目录结构.md","e715efa9bb4d71e2",{"html":162,"metadata":163},"\u003Ch1 id=\"博客系统目录结构\">博客系统目录结构\u003C/h1>\n\u003Ch2 id=\"根目录结构\">根目录结构\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>blog-system/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── src/                 # 源代码目录\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── content/         # 内容配置\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   │   └── posts/       # 博客文章 (Markdown)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── layouts/         # 页面布局\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── pages/           # 页面路由\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── components/      # 组件\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   └── styles/          # 样式\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── public/              # 静态资源\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── mcp-server/          # MCP 自动发布工具\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── astro.config.mjs     # Astro 配置\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└── package.json\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"关键目录说明\">关键目录说明\u003C/h2>\n\u003Ch3 id=\"srccontentposts\">\u003Ccode>src/content/posts/\u003C/code>\u003C/h3>\n\u003Cul>\n\u003Cli>存放所有博客文章\u003C/li>\n\u003Cli>使用 Markdown 格式\u003C/li>\n\u003Cli>支持 frontmatter 元数据（标题、日期、标签、密码等）\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"mcp-server\">\u003Ccode>mcp-server/\u003C/code>\u003C/h3>\n\u003Cul>\n\u003Cli>MCP (Model Context Protocol) 自动发布工具\u003C/li>\n\u003Cli>用于快速创建和发布博客文章\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"发布流程\">发布流程\u003C/h2>\n\u003Col>\n\u003Cli>本地开发：\u003Ccode>npm run dev\u003C/code>\u003C/li>\n\u003Cli>构建生产：\u003Ccode>npm run build\u003C/code>\u003C/li>\n\u003Cli>提交 GitHub → Vercel 自动部署\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"常用-git-命令\">常用 Git 命令\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">git\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> add\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> .\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">git\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> commit\u003C/span>\u003Cspan style=\"color:#BD93F9\"> -m\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">描述\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">git\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> push\u003C/span>\u003C/span>\u003C/code>\u003C/pre>",{"headings":164,"localImagePaths":182,"remoteImagePaths":183,"frontmatter":184,"imagePaths":187},[165,167,169,171,174,177,179],{"depth":56,"slug":166,"text":166},"博客系统目录结构",{"depth":29,"slug":168,"text":168},"根目录结构",{"depth":29,"slug":170,"text":170},"关键目录说明",{"depth":99,"slug":172,"text":173},"srccontentposts","src/content/posts/",{"depth":99,"slug":175,"text":176},"mcp-server","mcp-server/",{"depth":29,"slug":178,"text":178},"发布流程",{"depth":29,"slug":180,"text":181},"常用-git-命令","常用 Git 命令",[],[],{"title":151,"description":152,"pubDate":185,"tags":186,"password":127},["Date","2026-01-05T00:00:00.000Z"],[155,156,157],[],"2026-01-05-博客目录结构.md","2026-01-05-mcp-server-设计解析",{"id":189,"data":191,"body":198,"filePath":199,"digest":200,"rendered":201,"legacyId":236},{"title":192,"description":193,"pubDate":194,"updatedDate":195,"tags":196},"MCP Server 设计解析","深入理解 MCP 协议架构和开发流程",["Date","2026-01-05T00:00:00.000Z"],["Date","2026-01-05T00:00:00.000Z"],[20,79,81,197],"架构设计","# MCP Server 设计解析\n\n本文深入介绍 MCP (Model Context Protocol) Server 的架构设计和开发流程。\n\n## 1. 核心架构\n\n```\nAI (Claude)          MCP Server          业务逻辑\n    │                   │                   │\n    │  list_tools      │                   │\n    │ ───────────────► │                   │\n    │                  │ ── 查询 ─────────►│\n    │                  │ ◄── 返回工具列表──│\n    │  返回工具描述     │                   │\n    │ ◄─────────────── │                   │\n    │                   │                   │\n    │  call_tool       │                   │\n    │ ───────────────► │                   │\n    │                  │ ── 调用 ─────────►│\n    │                  │   创建 md 文件     │\n    │                  │   git push        │\n    │                  │ ◄── 返回结果 ──── │\n    │  返回执行结果     │                   │\n    │ ◄─────────────── │                   │\n```\n\n## 2. 使用的库和 API\n\n| 库/模块 | 用途 |\n|---------|------|\n| mcp.server | MCP 协议核心 |\n| mcp.types | 定义 Tool、TextContent |\n| PyGithub | GitHub API 交互 |\n| python-dotenv | 环境变量管理 |\n| aiohttp | HTTP 服务器 |\n\n## 3. MCP 开发流程\n\n```\n1. 安装依赖\n   pip install mcp PyGithub python-dotenv aiohttp\n\n2. 创建 Server 实例\n   server = Server('my-mcp-server')\n\n3. 定义工具 (list_tools)\n   - 工具名 name\n   - 描述 description\n   - 输入参数 inputSchema (JSON Schema)\n\n4. 实现工具逻辑 (call_tool)\n   - 根据 name 分发\n   - 调用业务函数\n   - 返回 TextContent[]\n\n5. 选择传输模式\n   - stdio: 标准输入输出 (本地)\n   - HTTP: 网络传输 (远程)\n\n6. 配置客户端\n   Claude Desktop / Claude Code 添加 MCP 配置\n```\n\n## 4. 核心 API 详解\n\n```python\n# 创建服务器\nserver = Server('blog-mcp-server')\n\n# 定义工具\n@server.list_tools()\nasync def list_tools() -> list[Tool]:\n    return [\n        Tool(\n            name='create_blog_post',\n            description='创建博客文章',\n            inputSchema={\n                'type': 'object',\n                'properties': {\n                    'title': {'type': 'string', 'description': '文章标题'},\n                    'content': {'type': 'string', 'description': '文章内容'}\n                },\n                'required': ['title', 'content']\n            }\n        )\n    ]\n\n# 处理工具调用\n@server.call_tool()\nasync def call_tool(name: str, arguments: dict) -> list[TextContent]:\n    if name == 'create_blog_post':\n        result = create_blog_post(...)\n        return [TextContent(type='text', text=result)]\n```\n\n## 5. JSON-RPC 协议\n\n```json\n// 请求\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"create_blog_post\",\n    \"arguments\": {\"title\": \"标题\", \"content\": \"内容\"}\n  }\n}\n\n// 响应\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"result\": {\"content\": [{\"type\": \"text\", \"text\": \"成功\"}]}\n}\n```\n\n## 6. 两种传输模式\n\n| 模式 | 命令 | 场景 |\n|------|------|------|\n| stdio | python server.py | 本地 Claude Desktop |\n| HTTP | python server.py --mode http | 远程（配合 cloudflared） |\n\n## 7. 文件结构\n\n```\nmcp-server/\n├── server.py      # MCP Server (协议层)\n├── blog_tool.py   # 业务逻辑层\n├── requirements.txt\n└── README.md\n```\n\n## 总结\n\nMCP 的核心是：**定义工具 → 处理调用 → 执行业务 → 返回结果**","src/content/posts/2026-01-05-mcp-server-设计解析.md","3a7441e6532b2048",{"html":202,"metadata":203},"\u003Ch1 id=\"mcp-server-设计解析\">MCP Server 设计解析\u003C/h1>\n\u003Cp>本文深入介绍 MCP (Model Context Protocol) Server 的架构设计和开发流程。\u003C/p>\n\u003Ch2 id=\"1-核心架构\">1. 核心架构\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>AI (Claude)          MCP Server          业务逻辑\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │                   │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │  list_tools      │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │ ───────────────► │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │                  │ ── 查询 ─────────►│\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │                  │ ◄── 返回工具列表──│\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │  返回工具描述     │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │ ◄─────────────── │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │                   │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │  call_tool       │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │ ───────────────► │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │                  │ ── 调用 ─────────►│\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │                  │   创建 md 文件     │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │                  │   git push        │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │                  │ ◄── 返回结果 ──── │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │  返回执行结果     │                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>    │ ◄─────────────── │                   │\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"2-使用的库和-api\">2. 使用的库和 API\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>库/模块\u003C/th>\u003Cth>用途\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>mcp.server\u003C/td>\u003Ctd>MCP 协议核心\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>mcp.types\u003C/td>\u003Ctd>定义 Tool、TextContent\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>PyGithub\u003C/td>\u003Ctd>GitHub API 交互\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>python-dotenv\u003C/td>\u003Ctd>环境变量管理\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>aiohttp\u003C/td>\u003Ctd>HTTP 服务器\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"3-mcp-开发流程\">3. MCP 开发流程\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>1. 安装依赖\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   pip install mcp PyGithub python-dotenv aiohttp\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>2. 创建 Server 实例\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   server = Server('my-mcp-server')\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>3. 定义工具 (list_tools)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   - 工具名 name\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   - 描述 description\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   - 输入参数 inputSchema (JSON Schema)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>4. 实现工具逻辑 (call_tool)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   - 根据 name 分发\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   - 调用业务函数\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   - 返回 TextContent[]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>5. 选择传输模式\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   - stdio: 标准输入输出 (本地)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   - HTTP: 网络传输 (远程)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>6. 配置客户端\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>   Claude Desktop / Claude Code 添加 MCP 配置\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"4-核心-api-详解\">4. 核心 API 详解\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 创建服务器\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">server \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Server(\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">blog-mcp-server\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 定义工具\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">@server.list_tools\u003C/span>\u003Cspan style=\"color:#F8F8F2\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">async\u003C/span>\u003Cspan style=\"color:#FF79C6\"> def\u003C/span>\u003Cspan style=\"color:#50FA7B\"> list_tools\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() \u003C/span>\u003Cspan style=\"color:#FF79C6\">->\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> list[Tool]:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">    return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        Tool(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            name\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            description\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">创建博客文章\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            inputSchema\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">object\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">properties\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">title\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">description\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">文章标题\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">description\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">文章内容\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">                },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">required\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: [\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">title\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">            }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        )\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    ]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 处理工具调用\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">@server.call_tool\u003C/span>\u003Cspan style=\"color:#F8F8F2\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">async\u003C/span>\u003Cspan style=\"color:#FF79C6\"> def\u003C/span>\u003Cspan style=\"color:#50FA7B\"> call_tool\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">name\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#8BE9FD;font-style:italic\"> str\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">arguments\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#8BE9FD;font-style:italic\"> dict\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) \u003C/span>\u003Cspan style=\"color:#FF79C6\">->\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> list[TextContent]:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> name \u003C/span>\u003Cspan style=\"color:#FF79C6\">==\u003C/span>\u003Cspan style=\"color:#E9F284\"> '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        result \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> create_blog_post(\u003C/span>\u003Cspan style=\"color:#BD93F9\">...\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">        return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [TextContent(\u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">type\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F1FA8C\">text\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">text\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">result)]\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"5-json-rpc-协议\">5. JSON-RPC 协议\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">// 请求\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">jsonrpc\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">2.0\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">id\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#BD93F9\"> 1\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">method\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">tools/call\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">params\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">    \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">name\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">    \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">arguments\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">title\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">标题\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">content\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">内容\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">// 响应\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">jsonrpc\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">2.0\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">id\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#BD93F9\"> 1\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">result\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">content\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [{\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">type\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">text\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">text\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">成功\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}]}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"6-两种传输模式\">6. 两种传输模式\u003C/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>模式\u003C/th>\u003Cth>命令\u003C/th>\u003Cth>场景\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>stdio\u003C/td>\u003Ctd>python server.py\u003C/td>\u003Ctd>本地 Claude Desktop\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>HTTP\u003C/td>\u003Ctd>python server.py —mode http\u003C/td>\u003Ctd>远程（配合 cloudflared）\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"7-文件结构\">7. 文件结构\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>mcp-server/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── server.py      # MCP Server (协议层)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── blog_tool.py   # 业务逻辑层\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── requirements.txt\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└── README.md\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"总结\">总结\u003C/h2>\n\u003Cp>MCP 的核心是：\u003Cstrong>定义工具 → 处理调用 → 执行业务 → 返回结果\u003C/strong>\u003C/p>",{"headings":204,"localImagePaths":229,"remoteImagePaths":230,"frontmatter":231,"imagePaths":235},[205,207,210,213,216,219,222,225,228],{"depth":56,"slug":206,"text":192},"mcp-server-设计解析",{"depth":29,"slug":208,"text":209},"1-核心架构","1. 核心架构",{"depth":29,"slug":211,"text":212},"2-使用的库和-api","2. 使用的库和 API",{"depth":29,"slug":214,"text":215},"3-mcp-开发流程","3. MCP 开发流程",{"depth":29,"slug":217,"text":218},"4-核心-api-详解","4. 核心 API 详解",{"depth":29,"slug":220,"text":221},"5-json-rpc-协议","5. JSON-RPC 协议",{"depth":29,"slug":223,"text":224},"6-两种传输模式","6. 两种传输模式",{"depth":29,"slug":226,"text":227},"7-文件结构","7. 文件结构",{"depth":29,"slug":110,"text":110},[],[],{"title":192,"description":193,"pubDate":232,"updatedDate":233,"tags":234},["Date","2026-01-05T00:00:00.000Z"],["Date","2026-01-05T00:00:00.000Z"],[20,79,81,197],[],"2026-01-05-mcp-server-设计解析.md","2026-01-05-mcp-图片上传测试",{"id":237,"data":239,"body":246,"filePath":247,"assetImports":248,"digest":250,"rendered":251,"legacyId":270},{"title":240,"description":241,"pubDate":242,"updatedDate":243,"tags":244},"MCP 图片上传测试","测试 MCP 图片上传功能",["Date","2026-01-05T00:00:00.000Z"],["Date","2026-01-05T00:00:00.000Z"],[19,20,245],"图片","# MCP 图片上传测试\n\n这是一篇使用 MCP 上传图片功能的测试文章。\n\n## 测试图片\n\n![MCP 测试图片](./images/2026-01-05-test-image.jpeg)\n\n## 功能说明\n\n通过 MCP 的 `upload_image` 工具上传图片：\n\n1. **上传图片**：调用 `upload_image(filename, base64_content)`\n2. **获取路径**：得到返回的相对路径 `./images/filename.jpeg`\n3. **在文章中引用**：使用 `![描述](./images/filename.jpeg)`\n\n## 图片信息\n\n- 文件名：2026-01-05-test-image.jpeg\n- 大小：383KB\n- 格式：JPEG\n\n## 总结\n\nMCP 图片上传功能正常工作！","src/content/posts/2026-01-05-mcp-图片上传测试.md",[249],"./images/2026-01-05-test-image.jpeg","c511a78252ccf1f1",{"html":252,"metadata":253},"\u003Ch1 id=\"mcp-图片上传测试\">MCP 图片上传测试\u003C/h1>\n\u003Cp>这是一篇使用 MCP 上传图片功能的测试文章。\u003C/p>\n\u003Ch2 id=\"测试图片\">测试图片\u003C/h2>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./images/2026-01-05-test-image.jpeg&#x22;,&#x22;alt&#x22;:&#x22;MCP 测试图片&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"功能说明\">功能说明\u003C/h2>\n\u003Cp>通过 MCP 的 \u003Ccode>upload_image\u003C/code> 工具上传图片：\u003C/p>\n\u003Col>\n\u003Cli>\u003Cstrong>上传图片\u003C/strong>：调用 \u003Ccode>upload_image(filename, base64_content)\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>获取路径\u003C/strong>：得到返回的相对路径 \u003Ccode>./images/filename.jpeg\u003C/code>\u003C/li>\n\u003Cli>\u003Cstrong>在文章中引用\u003C/strong>：使用 \u003Ccode>![描述](./images/filename.jpeg)\u003C/code>\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"图片信息\">图片信息\u003C/h2>\n\u003Cul>\n\u003Cli>文件名：2026-01-05-test-image.jpeg\u003C/li>\n\u003Cli>大小：383KB\u003C/li>\n\u003Cli>格式：JPEG\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"总结\">总结\u003C/h2>\n\u003Cp>MCP 图片上传功能正常工作！\u003C/p>",{"headings":254,"localImagePaths":263,"remoteImagePaths":264,"frontmatter":265,"imagePaths":269},[255,257,259,260,262],{"depth":56,"slug":256,"text":240},"mcp-图片上传测试",{"depth":29,"slug":258,"text":258},"测试图片",{"depth":29,"slug":140,"text":140},{"depth":29,"slug":261,"text":261},"图片信息",{"depth":29,"slug":110,"text":110},[249],[],{"title":240,"description":241,"pubDate":266,"updatedDate":267,"tags":268},["Date","2026-01-05T00:00:00.000Z"],["Date","2026-01-05T00:00:00.000Z"],[19,20,245],[249],"2026-01-05-mcp-图片上传测试.md","2026-01-05-从零搭建-ai-智能博客系统",{"id":271,"data":273,"body":281,"filePath":282,"digest":283,"rendered":284,"legacyId":437},{"title":274,"description":275,"pubDate":276,"updatedDate":277,"tags":278},"从零搭建 AI 智能博客系统","详细记录如何用 Astro + Vercel 搭建博客，并实现 AI 自动发布功能",["Date","2026-01-05T00:00:00.000Z"],["Date","2026-01-05T00:00:00.000Z"],[46,279,20,79,280],"Astro","Vercel","# 从零搭建 AI 智能博客系统\n\n本文详细记录了如何从零搭建一个支持 AI 自动发布的博客系统。\n\n## 1. 技术选型\n\n### 为什么选择这个方案？\n\n| 技术 | 选择理由 |\n|------|----------|\n| **Astro** | 静态站点生成器，性能好，学习成本低 |\n| **Vercel** | 免费托管，自动部署，CDN 加速 |\n| **MCP** | AI 协议标准，支持工具调用 |\n| **GitHub** | 代码托管，版本控制 |\n\n### 架构图\n\n```\n用户 (Claude Desktop/Code)\n       │\n       │ 对话\n       ▼\n┌──────────────────┐\n│  AI 模型         │ ← 生成对话总结\n└────────┬─────────┘\n         │\n         │ MCP 工具调用\n         ▼\n┌──────────────────┐\n│  MCP Server      │ ← 接收请求，创建文件\n└────────┬─────────┘\n         │\n         │ git push\n         ▼\n┌──────────────────┐\n│  GitHub          │ ← 代码托管\n└────────┬─────────┘\n         │\n         │ 自动部署\n         ▼\n┌──────────────────┐\n│  Vercel          │ ← 静态托管，发布网站\n└──────────────────┘\n```\n\n## 2. 初始化项目\n\n### 2.1 创建 Astro 项目\n\n```bash\n# 创建 Astro 项目\nnpm create astro@latest blog-system\n\n# 选择模板\n- Use a blog template? Yes\n- Install dependencies? Yes\n- Initialize git? Yes\n```\n\n### 2.2 项目结构\n\n```\nblog-system/\n├── src/\n│   ├── content/posts/    # 博客文章 (Markdown)\n│   ├── layouts/          # 页面布局\n│   ├── pages/            # 页面\n│   └── components/       # 组件\n├── public/               # 静态资源\n├── astro.config.mjs      # Astro 配置\n└── package.json\n```\n\n## 3. 功能增强\n\n### 3.1 文章 Frontmatter 定义\n\n```typescript\n// src/content/config.ts\nimport { defineCollection, z } from 'astro:content';\n\nconst posts = defineCollection({\n  type: 'content',\n  schema: z.object({\n    title: z.string(),\n    description: z.string(),\n    pubDate: z.coerce.date(),\n    tags: z.array(z.string()).default([]),\n    password: z.string().optional(), // 加密文章\n  }),\n});\n\nexport const collections = { posts };\n```\n\n### 3.2 密码保护功能\n\n在文章 frontmatter 添加 `password` 字段即可加密。\n\n### 3.3 搜索功能\n\n首页搜索实现，支持按标题和标签实时过滤。\n\n### 3.4 TOC 目录\n\n自动提取文章标题生成目录，支持固定定位。\n\n### 3.5 RSS 订阅\n\n生成 RSS XML 订阅源，支持 RSS 阅读器订阅。\n\n## 4. 部署到 Vercel\n\n### 4.1 推送代码到 GitHub\n\n```bash\ngit init\ngit add .\ngit commit -m \"Initial commit\"\ngit remote add origin https://github.com/你的用户名/blog-system-.git\ngit push -u origin main\n```\n\n### 4.2 Vercel 部署\n\n1. 登录 https://vercel.com\n2. Import GitHub 仓库\n3. Framework Preset 选择 Astro\n4. Deploy\n\n**访问地址：** https://blog-system-six-sepia.vercel.app\n\n## 5. MCP Server 实现\n\n### 5.1 什么是 MCP？\n\n**MCP (Model Context Protocol)** 是 Anthropic 推出的 AI 工具调用协议标准。\n\n#### MCP 的核心概念\n\n```\n┌─────────────────────────────────────────────────────────┐\n│                    MCP 协议层次                          │\n├─────────────────────────────────────────────────────────┤\n│  应用层 (你的应用)                                       │\n│      │                                                  │\n│      ▼                                                  │\n│  MCP Server (我们写的)                                   │\n│      │                                                  │\n│      ▼                                                  │\n│  MCP Client (Claude Desktop/Code)                       │\n│      │                                                  │\n│      ▼                                                  │\n│  AI Model (Claude)                                      │\n└─────────────────────────────────────────────────────────┘\n```\n\n#### MCP vs 传统 API\n\n| 特性 | 传统 API | MCP |\n|------|----------|-----|\n| 调用方式 | HTTP 请求 | 协议标准化 |\n| 工具发现 | 文档查询 | 自动发现 |\n| 参数格式 | 各家不同 | JSON Schema |\n| 状态管理 | 无 | Session 支持 |\n\n### 5.2 MCP 核心组件\n\n#### 1. Server\n\nMCP 服务器实例，所有工具的容器：\n\n```python\nfrom mcp.server import Server\nserver = Server(\"blog-mcp-server\")\n```\n\n#### 2. Tool\n\n工具定义，包含名称、描述和参数模式：\n\n```python\nfrom mcp.types import Tool\n\nTool(\n    name=\"create_blog_post\",\n    description=\"创建博客文章，自动保存并推送到 GitHub\",\n    inputSchema={\n        \"type\": \"object\",\n        \"properties\": {\n            \"title\": {\"type\": \"string\", \"description\": \"文章标题\"},\n            \"content\": {\"type\": \"string\", \"description\": \"文章内容\"}\n        },\n        \"required\": [\"title\", \"content\"]\n    }\n)\n```\n\n#### 3. list_tools 装饰器\n\nAI 查询可用工具时调用。\n\n#### 4. call_tool 装饰器\n\nAI 调用工具时触发。\n\n### 5.3 JSON-RPC 2.0 协议\n\nMCP 基于 **JSON-RPC 2.0** 协议通信：\n\n```json\n// 请求\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"create_blog_post\",\n    \"arguments\": {\"title\": \"文章标题\", \"content\": \"内容\"}\n  }\n}\n\n// 响应\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"result\": {\"content\": [{\"type\": \"text\", \"text\": \"成功\"}]}\n}\n```\n\n### 5.4 安装依赖\n\n```bash\ncd mcp-server\npip install mcp>=1.0.0 PyGithub python-dotenv aiohttp\n```\n\n### 5.5 完整 Server 实现\n\n```python\nfrom mcp.server import Server\nfrom mcp.types import Tool, TextContent\n\nserver = Server(\"blog-mcp-server\")\n\n@server.list_tools()\nasync def list_tools() -> list[Tool]:\n    return [\n        Tool(\n            name=\"create_blog_post\",\n            description=\"创建博客文章，自动保存并推送到 GitHub\",\n            inputSchema={\n                \"type\": \"object\",\n                \"properties\": {\n                    \"title\": {\"type\": \"string\"},\n                    \"content\": {\"type\": \"string\"},\n                    \"tags\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}\n                },\n                \"required\": [\"title\", \"content\"]\n            }\n        ),\n        Tool(\n            name=\"upload_image\",\n            description=\"上传图片到博客\",\n            inputSchema={\n                \"type\": \"object\",\n                \"properties\": {\n                    \"filename\": {\"type\": \"string\"},\n                    \"content\": {\"type\": \"string\"}\n                },\n                \"required\": [\"filename\", \"content\"]\n            }\n        )\n    ]\n\n@server.call_tool()\nasync def call_tool(name: str, arguments: dict) -> list[TextContent]:\n    if name == \"create_blog_post\":\n        result = create_blog_post(...)\n        return [TextContent(type=\"text\", text=result)]\n```\n\n### 5.6 业务逻辑实现\n\n```python\nclass BlogPublisher:\n    def create_post(self, title, content, tags=None, description=\"\"):\n        # 1. 生成文件名\n        filename = f\"{date}-{title}.md\"\n        # 2. 写入 Markdown\n        filepath.write_text(markdown_content)\n        # 3. Git 提交\n        subprocess.run([\"git\", \"add\", str(filepath)])\n        subprocess.run([\"git\", \"commit\", \"-m\", f\"Add post: {title}\"])\n        subprocess.run([\"git\", \"push\"])\n        return {\"success\": True, \"filename\": filename}\n\n    def upload_image(self, filename, base64_content):\n        # 解码并保存图片\n        image_data = base64.b64decode(base64_content)\n        filepath.write_bytes(image_data)\n        # Git 提交\n        subprocess.run([\"git\", \"add\", str(filepath)])\n        subprocess.run([\"git\", \"commit\", \"-m\", f\"Add image: {filename}\"])\n        subprocess.run([\"git\", \"push\"])\n        return {\"success\": True, \"path\": f\"./images/{filename}\"}\n```\n\n### 5.7 传输模式\n\nMCP 支持两种传输模式：\n\n#### 1. Stdio 模式（标准输入输出）\n\n用于**本地调用**，Claude Desktop 直接通过 stdin/stdout 与 Server 通信。\n\n**优点：** 简单直接，无需网络配置\n\n**缺点：** 只能本地使用\n\n#### 2. HTTP + SSE 模式\n\n用于**远程调用**，通过 HTTP 传输。\n\n**SSE (Server-Sent Events)：**\n- 单向通信：Server → Client\n- 基于 HTTP 长连接\n- 自动重连机制\n- 适合实时推送\n\n```bash\npython server.py --mode http --port 8080\n```\n\n## 6. 远程访问：Cloudflare Tunnel\n\n### 6.1 问题背景\n\n家庭服务器在内网，外部无法直接访问。\n\n### 6.2 解决方案：内网穿透\n\n```\n┌─────────────┐                        ┌─────────────┐\n│ 家庭服务器   │ ─── 加密隧道 ─────────►│  Cloudflare │\n└─────────────┘                        └──────┬──────┘\n                                               │\n                                               ▼\n                                         ┌─────────────┐\n                                         │  公网域名    │\n                                         │ trycloudflare│\n                                         └──────┬──────┘\n                                                │\n                                                ▼\n┌─────────────┐                        ┌─────────────┐\n│ 家庭服务器   │ ◄─────────────────── │  远程设备    │\n│ (内网 IP)   │ ◄──── HTTPS ───────── │ (外网)       │\n└─────────────┘                        └─────────────┘\n```\n\n### 6.3 Cloudflare Tunnel 原理\n\n1. cloudflared 进程在家庭服务器运行\n2. 与 Cloudflare 建立持久 TLS 连接\n3. Cloudflare 分配临时域名: xxx.trycloudflare.com\n4. 外部请求 → Cloudflare → 隧道 → 家庭服务器\n\n**技术特点：**\n- 零配置公网访问\n- 自动 HTTPS（Cloudflare 证书）\n- DDoS 防护\n- 免费使用\n\n### 6.4 安装 cloudflared\n\n**Linux (WSL):**\n\n```bash\nwget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64\nsudo mv cloudflared-linux-amd64 /usr/local/bin/cloudflared\nsudo chmod +x /usr/local/bin/cloudflared\ncloudflared --version\n```\n\n### 6.5 启动 Tunnel\n\n**临时测试：**\n\n```bash\n# 确保 MCP 服务先启动\npython server.py --mode http\n\n# 新终端启动 tunnel\ncloudflared tunnel --url http://localhost:8080\n```\n\n输出：\n```\nINF The tunnel has started!\nINF Visit https://random-name.trycloudflare.com\n```\n\n**后台服务（生产环境）：**\n\n创建 systemd 服务实现开机自启。\n\n### 6.6 其他内网穿透方案对比\n\n| 方案 | 成本 | 难度 | 稳定性 |\n|------|------|------|--------|\n| **Cloudflare Tunnel** | 免费 | 低 | 高 |\n| **Ngrok** | 免费/付费 | 低 | 高 |\n| **Frp** | 需 VPS | 中 | 高 |\n| **ZeroTier** | 免费 | 中 | 中 |\n\n## 7. 配置远程 AI 客户端\n\n### 7.1 Claude Desktop 配置\n\n```json\n{\n  \"mcpServers\": {\n    \"blog-remote\": {\n      \"url\": \"https://random-name.trycloudflare.com/sse\"\n    }\n  }\n}\n```\n\n### 7.2 Claude Code CLI 配置\n\n```bash\nclaude mcp add blog-remote -s http --url \"https://random-name.trycloudflare.com\"\n```\n\n## 8. 功能特性\n\n### 已实现功能\n\n- Markdown 文章管理\n- 标签分类\n- 搜索功能\n- TOC 目录\n- 阅读时间估算\n- RSS 订阅\n- 密码保护\n- 图片上传\n- MCP 自动化发布\n\n## 9. 常用命令\n\n```bash\n# 开发\nnpm run dev\n\n# 构建\nnpm run build\n\n# MCP 本地模式\npython server.py\n\n# MCP HTTP 模式\npython server.py --mode http\n\n# 启动 tunnel\ncloudflared tunnel --url http://localhost:8080\n```\n\n## 10. 总结\n\n### 技术栈总结\n\n| 层级 | 技术 | 作用 |\n|------|------|------|\n| 前端 | Astro | 静态站点生成 |\n| 托管 | Vercel | 免费部署托管 |\n| AI 协议 | MCP | 工具调用标准 |\n| 代码托管 | GitHub | 版本控制 |\n| 内网穿透 | Cloudflare | 远程访问 |\n\n### 核心优势\n\n1. **AI 集成** - 通过 MCP，AI 可以自动创建和发布文章\n2. **零运维** - Vercel 自动部署，无需服务器\n3. **免费托管** - Vercel 免费层够个人使用\n4. **远程访问** - Cloudflare Tunnel 实现任意设备访问\n5. **扩展性强** - 可以继续添加新功能\n\n### 后续优化方向\n\n- 添加评论系统 (Giscus/Utterances)\n- 部署到私有服务器\n- 添加图片图床 (Cloudinary/Imgur)\n- 多作者支持\n- CI/CD 优化\n\n---\n\n**博客地址：** https://blog-system-six-sepia.vercel.app\n\n**RSS 订阅：** https://blog-system-six-sepia.vercel.app/rss.xml\n\n**GitHub：** https://github.com/LiCong-22/blog-system-","src/content/posts/2026-01-05-从零搭建-ai-智能博客系统.md","09901971f9153d4c",{"html":285,"metadata":286},"\u003Ch1 id=\"从零搭建-ai-智能博客系统\">从零搭建 AI 智能博客系统\u003C/h1>\n\u003Cp>本文详细记录了如何从零搭建一个支持 AI 自动发布的博客系统。\u003C/p>\n\u003Ch2 id=\"1-技术选型\">1. 技术选型\u003C/h2>\n\u003Ch3 id=\"为什么选择这个方案\">为什么选择这个方案？\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>技术\u003C/th>\u003Cth>选择理由\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Cstrong>Astro\u003C/strong>\u003C/td>\u003Ctd>静态站点生成器，性能好，学习成本低\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Vercel\u003C/strong>\u003C/td>\u003Ctd>免费托管，自动部署，CDN 加速\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>MCP\u003C/strong>\u003C/td>\u003Ctd>AI 协议标准，支持工具调用\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>GitHub\u003C/strong>\u003C/td>\u003Ctd>代码托管，版本控制\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"架构图\">架构图\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>用户 (Claude Desktop/Code)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       │ 对话\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>       ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>┌──────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  AI 模型         │ ← 生成对话总结\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└────────┬─────────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         │ MCP 工具调用\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>┌──────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  MCP Server      │ ← 接收请求，创建文件\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└────────┬─────────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         │ git push\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>┌──────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  GitHub          │ ← 代码托管\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└────────┬─────────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         │ 自动部署\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>         ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>┌──────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  Vercel          │ ← 静态托管，发布网站\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└──────────────────┘\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"2-初始化项目\">2. 初始化项目\u003C/h2>\n\u003Ch3 id=\"21-创建-astro-项目\">2.1 创建 Astro 项目\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 创建 Astro 项目\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">npm\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> create\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> astro@latest\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> blog-system\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 选择模板\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">-\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> Use\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> a\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> blog\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> template?\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> Yes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">-\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> Install\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> dependencies?\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> Yes\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">-\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> Initialize\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> git?\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> Yes\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"22-项目结构\">2.2 项目结构\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>blog-system/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── src/\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── content/posts/    # 博客文章 (Markdown)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── layouts/          # 页面布局\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   ├── pages/            # 页面\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│   └── components/       # 组件\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── public/               # 静态资源\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├── astro.config.mjs      # Astro 配置\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└── package.json\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"3-功能增强\">3. 功能增强\u003C/h2>\n\u003Ch3 id=\"31-文章-frontmatter-定义\">3.1 文章 Frontmatter 定义\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"typescript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">// src/content/config.ts\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> { defineCollection, z } \u003C/span>\u003Cspan style=\"color:#FF79C6\">from\u003C/span>\u003Cspan style=\"color:#E9F284\"> '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">astro:content\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> posts \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#50FA7B\"> defineCollection\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  type\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> '\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">'\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  schema\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> z.\u003C/span>\u003Cspan style=\"color:#50FA7B\">object\u003C/span>\u003Cspan style=\"color:#F8F8F2\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    title\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> z.\u003C/span>\u003Cspan style=\"color:#50FA7B\">string\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    description\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> z.\u003C/span>\u003Cspan style=\"color:#50FA7B\">string\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    pubDate\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> z.coerce.\u003C/span>\u003Cspan style=\"color:#50FA7B\">date\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    tags\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> z.\u003C/span>\u003Cspan style=\"color:#50FA7B\">array\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(z.\u003C/span>\u003Cspan style=\"color:#50FA7B\">string\u003C/span>\u003Cspan style=\"color:#F8F8F2\">()).\u003C/span>\u003Cspan style=\"color:#50FA7B\">default\u003C/span>\u003Cspan style=\"color:#F8F8F2\">([]),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    password\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> z.\u003C/span>\u003Cspan style=\"color:#50FA7B\">string\u003C/span>\u003Cspan style=\"color:#F8F8F2\">().\u003C/span>\u003Cspan style=\"color:#50FA7B\">optional\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(), \u003C/span>\u003Cspan style=\"color:#6272A4\">// 加密文章\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">});\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">export\u003C/span>\u003Cspan style=\"color:#FF79C6\"> const\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> collections \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> { posts };\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"32-密码保护功能\">3.2 密码保护功能\u003C/h3>\n\u003Cp>在文章 frontmatter 添加 \u003Ccode>password\u003C/code> 字段即可加密。\u003C/p>\n\u003Ch3 id=\"33-搜索功能\">3.3 搜索功能\u003C/h3>\n\u003Cp>首页搜索实现，支持按标题和标签实时过滤。\u003C/p>\n\u003Ch3 id=\"34-toc-目录\">3.4 TOC 目录\u003C/h3>\n\u003Cp>自动提取文章标题生成目录，支持固定定位。\u003C/p>\n\u003Ch3 id=\"35-rss-订阅\">3.5 RSS 订阅\u003C/h3>\n\u003Cp>生成 RSS XML 订阅源，支持 RSS 阅读器订阅。\u003C/p>\n\u003Ch2 id=\"4-部署到-vercel\">4. 部署到 Vercel\u003C/h2>\n\u003Ch3 id=\"41-推送代码到-github\">4.1 推送代码到 GitHub\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">git\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> init\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">git\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> add\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> .\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">git\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> commit\u003C/span>\u003Cspan style=\"color:#BD93F9\"> -m\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">Initial commit\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">git\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> remote\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> add\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> origin\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> https://github.com/你的用户名/blog-system-.git\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">git\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> push\u003C/span>\u003Cspan style=\"color:#BD93F9\"> -u\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> origin\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> main\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"42-vercel-部署\">4.2 Vercel 部署\u003C/h3>\n\u003Col>\n\u003Cli>登录 \u003Ca href=\"https://vercel.com\">https://vercel.com\u003C/a>\u003C/li>\n\u003Cli>Import GitHub 仓库\u003C/li>\n\u003Cli>Framework Preset 选择 Astro\u003C/li>\n\u003Cli>Deploy\u003C/li>\n\u003C/ol>\n\u003Cp>\u003Cstrong>访问地址：\u003C/strong> \u003Ca href=\"https://blog-system-six-sepia.vercel.app\">https://blog-system-six-sepia.vercel.app\u003C/a>\u003C/p>\n\u003Ch2 id=\"5-mcp-server-实现\">5. MCP Server 实现\u003C/h2>\n\u003Ch3 id=\"51-什么是-mcp\">5.1 什么是 MCP？\u003C/h3>\n\u003Cp>\u003Cstrong>MCP (Model Context Protocol)\u003C/strong> 是 Anthropic 推出的 AI 工具调用协议标准。\u003C/p>\n\u003Ch4 id=\"mcp-的核心概念\">MCP 的核心概念\u003C/h4>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>┌─────────────────────────────────────────────────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│                    MCP 协议层次                          │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>├─────────────────────────────────────────────────────────┤\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  应用层 (你的应用)                                       │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│      │                                                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│      ▼                                                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  MCP Server (我们写的)                                   │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│      │                                                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│      ▼                                                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  MCP Client (Claude Desktop/Code)                       │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│      │                                                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│      ▼                                                  │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│  AI Model (Claude)                                      │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└─────────────────────────────────────────────────────────┘\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch4 id=\"mcp-vs-传统-api\">MCP vs 传统 API\u003C/h4>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>特性\u003C/th>\u003Cth>传统 API\u003C/th>\u003Cth>MCP\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>调用方式\u003C/td>\u003Ctd>HTTP 请求\u003C/td>\u003Ctd>协议标准化\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>工具发现\u003C/td>\u003Ctd>文档查询\u003C/td>\u003Ctd>自动发现\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>参数格式\u003C/td>\u003Ctd>各家不同\u003C/td>\u003Ctd>JSON Schema\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>状态管理\u003C/td>\u003Ctd>无\u003C/td>\u003Ctd>Session 支持\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"52-mcp-核心组件\">5.2 MCP 核心组件\u003C/h3>\n\u003Ch4 id=\"1-server\">1. Server\u003C/h4>\n\u003Cp>MCP 服务器实例，所有工具的容器：\u003C/p>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">from\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> mcp.server \u003C/span>\u003Cspan style=\"color:#FF79C6\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Server\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">server \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Server(\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">blog-mcp-server\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch4 id=\"2-tool\">2. Tool\u003C/h4>\n\u003Cp>工具定义，包含名称、描述和参数模式：\u003C/p>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">from\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> mcp.types \u003C/span>\u003Cspan style=\"color:#FF79C6\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Tool\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">Tool(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">    name\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">    description\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">创建博客文章，自动保存并推送到 GitHub\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">    inputSchema\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">        \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">object\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">        \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">properties\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">            \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">title\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">description\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">文章标题\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">            \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">description\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">文章内容\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">        \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">required\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: [\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">title\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch4 id=\"3-list_tools-装饰器\">3. list_tools 装饰器\u003C/h4>\n\u003Cp>AI 查询可用工具时调用。\u003C/p>\n\u003Ch4 id=\"4-call_tool-装饰器\">4. call_tool 装饰器\u003C/h4>\n\u003Cp>AI 调用工具时触发。\u003C/p>\n\u003Ch3 id=\"53-json-rpc-20-协议\">5.3 JSON-RPC 2.0 协议\u003C/h3>\n\u003Cp>MCP 基于 \u003Cstrong>JSON-RPC 2.0\u003C/strong> 协议通信：\u003C/p>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">// 请求\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">jsonrpc\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">2.0\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">id\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#BD93F9\"> 1\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">method\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">tools/call\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">params\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">    \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">name\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">    \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">arguments\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">title\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">文章标题\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">content\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">内容\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">// 响应\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">jsonrpc\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">2.0\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">id\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#BD93F9\"> 1\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">result\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">content\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [{\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">type\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">text\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">text\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">成功\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}]}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"54-安装依赖\">5.4 安装依赖\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FD\">cd\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> mcp-server\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">pip\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> install\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> mc\u003C/span>\u003Cspan style=\"color:#F8F8F2\">p\u003C/span>\u003Cspan style=\"color:#FF79C6\">>\u003C/span>\u003Cspan style=\"color:#F1FA8C\">=\u003C/span>\u003Cspan style=\"color:#BD93F9\">1.0.0\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> PyGithub\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> python-dotenv\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> aiohttp\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"55-完整-server-实现\">5.5 完整 Server 实现\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">from\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> mcp.server \u003C/span>\u003Cspan style=\"color:#FF79C6\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Server\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">from\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> mcp.types \u003C/span>\u003Cspan style=\"color:#FF79C6\">import\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Tool, TextContent\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">server \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> Server(\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">blog-mcp-server\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">@server.list_tools\u003C/span>\u003Cspan style=\"color:#F8F8F2\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">async\u003C/span>\u003Cspan style=\"color:#FF79C6\"> def\u003C/span>\u003Cspan style=\"color:#50FA7B\"> list_tools\u003C/span>\u003Cspan style=\"color:#F8F8F2\">() \u003C/span>\u003Cspan style=\"color:#FF79C6\">->\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> list[Tool]:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">    return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        Tool(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            name\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            description\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">创建博客文章，自动保存并推送到 GitHub\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            inputSchema\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">object\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">properties\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">title\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">tags\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">array\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">items\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">                },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">required\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: [\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">title\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">            }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        ),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        Tool(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            name\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">upload_image\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            description\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">上传图片到博客\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FFB86C;font-style:italic\">            inputSchema\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">object\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">properties\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">filename\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">},\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                    \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">type\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">string\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">                },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#E9F284\">                \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">required\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: [\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">filename\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">content\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">            }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        )\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    ]\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">@server.call_tool\u003C/span>\u003Cspan style=\"color:#F8F8F2\">()\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">async\u003C/span>\u003Cspan style=\"color:#FF79C6\"> def\u003C/span>\u003Cspan style=\"color:#50FA7B\"> call_tool\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">name\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#8BE9FD;font-style:italic\"> str\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">arguments\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#8BE9FD;font-style:italic\"> dict\u003C/span>\u003Cspan style=\"color:#F8F8F2\">) \u003C/span>\u003Cspan style=\"color:#FF79C6\">->\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> list[TextContent]:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">    if\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> name \u003C/span>\u003Cspan style=\"color:#FF79C6\">==\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">create_blog_post\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        result \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> create_blog_post(\u003C/span>\u003Cspan style=\"color:#BD93F9\">...\u003C/span>\u003Cspan style=\"color:#F8F8F2\">)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">        return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> [TextContent(\u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">type\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">text\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">text\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\">result)]\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"56-业务逻辑实现\">5.6 业务逻辑实现\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">class\u003C/span>\u003Cspan style=\"color:#8BE9FD\"> BlogPublisher\u003C/span>\u003Cspan style=\"color:#F8F8F2\">:\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">    def\u003C/span>\u003Cspan style=\"color:#50FA7B\"> create_post\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#BD93F9;font-style:italic\">self\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">title\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">content\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">tags\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#BD93F9\">None\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">description\u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">        # 1. 生成文件名\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        filename \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#FF79C6\"> f\u003C/span>\u003Cspan style=\"color:#F1FA8C\">\"\u003C/span>\u003Cspan style=\"color:#BD93F9\">{\u003C/span>\u003Cspan style=\"color:#F8F8F2\">date\u003C/span>\u003Cspan style=\"color:#BD93F9\">}\u003C/span>\u003Cspan style=\"color:#F1FA8C\">-\u003C/span>\u003Cspan style=\"color:#BD93F9\">{\u003C/span>\u003Cspan style=\"color:#F8F8F2\">title\u003C/span>\u003Cspan style=\"color:#BD93F9\">}\u003C/span>\u003Cspan style=\"color:#F1FA8C\">.md\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">        # 2. 写入 Markdown\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        filepath.write_text(markdown_content)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">        # 3. Git 提交\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        subprocess.run([\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">git\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">add\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#8BE9FD;font-style:italic\">str\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(filepath)])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        subprocess.run([\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">git\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">commit\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">-m\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FF79C6\">f\u003C/span>\u003Cspan style=\"color:#F1FA8C\">\"Add post: \u003C/span>\u003Cspan style=\"color:#BD93F9\">{\u003C/span>\u003Cspan style=\"color:#F8F8F2\">title\u003C/span>\u003Cspan style=\"color:#BD93F9\">}\u003C/span>\u003Cspan style=\"color:#F1FA8C\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        subprocess.run([\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">git\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">push\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">        return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">success\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#BD93F9\">True\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">filename\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: filename}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">    def\u003C/span>\u003Cspan style=\"color:#50FA7B\"> upload_image\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(\u003C/span>\u003Cspan style=\"color:#BD93F9;font-style:italic\">self\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">filename\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FFB86C;font-style:italic\">base64_content\u003C/span>\u003Cspan style=\"color:#F8F8F2\">):\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">        # 解码并保存图片\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        image_data \u003C/span>\u003Cspan style=\"color:#FF79C6\">=\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> base64.b64decode(base64_content)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        filepath.write_bytes(image_data)\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\">        # Git 提交\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        subprocess.run([\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">git\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">add\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#8BE9FD;font-style:italic\">str\u003C/span>\u003Cspan style=\"color:#F8F8F2\">(filepath)])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        subprocess.run([\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">git\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">commit\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">-m\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#FF79C6\">f\u003C/span>\u003Cspan style=\"color:#F1FA8C\">\"Add image: \u003C/span>\u003Cspan style=\"color:#BD93F9\">{\u003C/span>\u003Cspan style=\"color:#F8F8F2\">filename\u003C/span>\u003Cspan style=\"color:#BD93F9\">}\u003C/span>\u003Cspan style=\"color:#F1FA8C\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">        subprocess.run([\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">git\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">push\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">])\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#FF79C6\">        return\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">success\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#BD93F9\">True\u003C/span>\u003Cspan style=\"color:#F8F8F2\">, \u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">path\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">: \u003C/span>\u003Cspan style=\"color:#FF79C6\">f\u003C/span>\u003Cspan style=\"color:#F1FA8C\">\"./images/\u003C/span>\u003Cspan style=\"color:#BD93F9\">{\u003C/span>\u003Cspan style=\"color:#F8F8F2\">filename\u003C/span>\u003Cspan style=\"color:#BD93F9\">}\u003C/span>\u003Cspan style=\"color:#F1FA8C\">\"\u003C/span>\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"57-传输模式\">5.7 传输模式\u003C/h3>\n\u003Cp>MCP 支持两种传输模式：\u003C/p>\n\u003Ch4 id=\"1-stdio-模式标准输入输出\">1. Stdio 模式（标准输入输出）\u003C/h4>\n\u003Cp>用于\u003Cstrong>本地调用\u003C/strong>，Claude Desktop 直接通过 stdin/stdout 与 Server 通信。\u003C/p>\n\u003Cp>\u003Cstrong>优点：\u003C/strong> 简单直接，无需网络配置\u003C/p>\n\u003Cp>\u003Cstrong>缺点：\u003C/strong> 只能本地使用\u003C/p>\n\u003Ch4 id=\"2-http--sse-模式\">2. HTTP + SSE 模式\u003C/h4>\n\u003Cp>用于\u003Cstrong>远程调用\u003C/strong>，通过 HTTP 传输。\u003C/p>\n\u003Cp>\u003Cstrong>SSE (Server-Sent Events)：\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>单向通信：Server → Client\u003C/li>\n\u003Cli>基于 HTTP 长连接\u003C/li>\n\u003Cli>自动重连机制\u003C/li>\n\u003Cli>适合实时推送\u003C/li>\n\u003C/ul>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">python\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> server.py\u003C/span>\u003Cspan style=\"color:#BD93F9\"> --mode\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> http\u003C/span>\u003Cspan style=\"color:#BD93F9\"> --port\u003C/span>\u003Cspan style=\"color:#BD93F9\"> 8080\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"6-远程访问cloudflare-tunnel\">6. 远程访问：Cloudflare Tunnel\u003C/h2>\n\u003Ch3 id=\"61-问题背景\">6.1 问题背景\u003C/h3>\n\u003Cp>家庭服务器在内网，外部无法直接访问。\u003C/p>\n\u003Ch3 id=\"62-解决方案内网穿透\">6.2 解决方案：内网穿透\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>┌─────────────┐                        ┌─────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│ 家庭服务器   │ ─── 加密隧道 ─────────►│  Cloudflare │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└─────────────┘                        └──────┬──────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                                               │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                                               ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                                         ┌─────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                                         │  公网域名    │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                                         │ trycloudflare│\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                                         └──────┬──────┘\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                                                │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>                                                ▼\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>┌─────────────┐                        ┌─────────────┐\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│ 家庭服务器   │ ◄─────────────────── │  远程设备    │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>│ (内网 IP)   │ ◄──── HTTPS ───────── │ (外网)       │\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>└─────────────┘                        └─────────────┘\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"63-cloudflare-tunnel-原理\">6.3 Cloudflare Tunnel 原理\u003C/h3>\n\u003Col>\n\u003Cli>cloudflared 进程在家庭服务器运行\u003C/li>\n\u003Cli>与 Cloudflare 建立持久 TLS 连接\u003C/li>\n\u003Cli>Cloudflare 分配临时域名: xxx.trycloudflare.com\u003C/li>\n\u003Cli>外部请求 → Cloudflare → 隧道 → 家庭服务器\u003C/li>\n\u003C/ol>\n\u003Cp>\u003Cstrong>技术特点：\u003C/strong>\u003C/p>\n\u003Cul>\n\u003Cli>零配置公网访问\u003C/li>\n\u003Cli>自动 HTTPS（Cloudflare 证书）\u003C/li>\n\u003Cli>DDoS 防护\u003C/li>\n\u003Cli>免费使用\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"64-安装-cloudflared\">6.4 安装 cloudflared\u003C/h3>\n\u003Cp>\u003Cstrong>Linux (WSL):\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">wget\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">sudo\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> mv\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> cloudflared-linux-amd64\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> /usr/local/bin/cloudflared\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">sudo\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> chmod\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> +x\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> /usr/local/bin/cloudflared\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">cloudflared\u003C/span>\u003Cspan style=\"color:#BD93F9\"> --version\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"65-启动-tunnel\">6.5 启动 Tunnel\u003C/h3>\n\u003Cp>\u003Cstrong>临时测试：\u003C/strong>\u003C/p>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 确保 MCP 服务先启动\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">python\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> server.py\u003C/span>\u003Cspan style=\"color:#BD93F9\"> --mode\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> http\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 新终端启动 tunnel\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">cloudflared\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> tunnel\u003C/span>\u003Cspan style=\"color:#BD93F9\"> --url\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> http://localhost:8080\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>输出：\u003C/p>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>INF The tunnel has started!\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan>INF Visit https://random-name.trycloudflare.com\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>后台服务（生产环境）：\u003C/strong>\u003C/p>\n\u003Cp>创建 systemd 服务实现开机自启。\u003C/p>\n\u003Ch3 id=\"66-其他内网穿透方案对比\">6.6 其他内网穿透方案对比\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>方案\u003C/th>\u003Cth>成本\u003C/th>\u003Cth>难度\u003C/th>\u003Cth>稳定性\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>\u003Cstrong>Cloudflare Tunnel\u003C/strong>\u003C/td>\u003Ctd>免费\u003C/td>\u003Ctd>低\u003C/td>\u003Ctd>高\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Ngrok\u003C/strong>\u003C/td>\u003Ctd>免费/付费\u003C/td>\u003Ctd>低\u003C/td>\u003Ctd>高\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>Frp\u003C/strong>\u003C/td>\u003Ctd>需 VPS\u003C/td>\u003Ctd>中\u003C/td>\u003Ctd>高\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>\u003Cstrong>ZeroTier\u003C/strong>\u003C/td>\u003Ctd>免费\u003C/td>\u003Ctd>中\u003C/td>\u003Ctd>中\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch2 id=\"7-配置远程-ai-客户端\">7. 配置远程 AI 客户端\u003C/h2>\n\u003Ch3 id=\"71-claude-desktop-配置\">7.1 Claude Desktop 配置\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"json\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">  \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">mcpServers\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">    \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">blog-remote\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#F8F8F2\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#8BE9FE\">      \"\u003C/span>\u003Cspan style=\"color:#8BE9FD\">url\u003C/span>\u003Cspan style=\"color:#8BE9FE\">\"\u003C/span>\u003Cspan style=\"color:#FF79C6\">:\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">https://random-name.trycloudflare.com/sse\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#F8F8F2\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch3 id=\"72-claude-code-cli-配置\">7.2 Claude Code CLI 配置\u003C/h3>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">claude\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> mcp\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> add\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> blog-remote\u003C/span>\u003Cspan style=\"color:#BD93F9\"> -s\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> http\u003C/span>\u003Cspan style=\"color:#BD93F9\"> --url\u003C/span>\u003Cspan style=\"color:#E9F284\"> \"\u003C/span>\u003Cspan style=\"color:#F1FA8C\">https://random-name.trycloudflare.com\u003C/span>\u003Cspan style=\"color:#E9F284\">\"\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"8-功能特性\">8. 功能特性\u003C/h2>\n\u003Ch3 id=\"已实现功能\">已实现功能\u003C/h3>\n\u003Cul>\n\u003Cli>Markdown 文章管理\u003C/li>\n\u003Cli>标签分类\u003C/li>\n\u003Cli>搜索功能\u003C/li>\n\u003Cli>TOC 目录\u003C/li>\n\u003Cli>阅读时间估算\u003C/li>\n\u003Cli>RSS 订阅\u003C/li>\n\u003Cli>密码保护\u003C/li>\n\u003Cli>图片上传\u003C/li>\n\u003Cli>MCP 自动化发布\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"9-常用命令\">9. 常用命令\u003C/h2>\n\u003Cpre class=\"astro-code dracula\" style=\"background-color:#282A36;color:#F8F8F2; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 开发\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">npm\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> run\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> dev\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 构建\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">npm\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> run\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> build\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># MCP 本地模式\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">python\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> server.py\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># MCP HTTP 模式\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">python\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> server.py\u003C/span>\u003Cspan style=\"color:#BD93F9\"> --mode\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> http\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6272A4\"># 启动 tunnel\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#50FA7B\">cloudflared\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> tunnel\u003C/span>\u003Cspan style=\"color:#BD93F9\"> --url\u003C/span>\u003Cspan style=\"color:#F1FA8C\"> http://localhost:8080\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"10-总结\">10. 总结\u003C/h2>\n\u003Ch3 id=\"技术栈总结\">技术栈总结\u003C/h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable>\u003Cthead>\u003Ctr>\u003Cth>层级\u003C/th>\u003Cth>技术\u003C/th>\u003Cth>作用\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd>前端\u003C/td>\u003Ctd>Astro\u003C/td>\u003Ctd>静态站点生成\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>托管\u003C/td>\u003Ctd>Vercel\u003C/td>\u003Ctd>免费部署托管\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>AI 协议\u003C/td>\u003Ctd>MCP\u003C/td>\u003Ctd>工具调用标准\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>代码托管\u003C/td>\u003Ctd>GitHub\u003C/td>\u003Ctd>版本控制\u003C/td>\u003C/tr>\u003Ctr>\u003Ctd>内网穿透\u003C/td>\u003Ctd>Cloudflare\u003C/td>\u003Ctd>远程访问\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\n\u003Ch3 id=\"核心优势\">核心优势\u003C/h3>\n\u003Col>\n\u003Cli>\u003Cstrong>AI 集成\u003C/strong> - 通过 MCP，AI 可以自动创建和发布文章\u003C/li>\n\u003Cli>\u003Cstrong>零运维\u003C/strong> - Vercel 自动部署，无需服务器\u003C/li>\n\u003Cli>\u003Cstrong>免费托管\u003C/strong> - Vercel 免费层够个人使用\u003C/li>\n\u003Cli>\u003Cstrong>远程访问\u003C/strong> - Cloudflare Tunnel 实现任意设备访问\u003C/li>\n\u003Cli>\u003Cstrong>扩展性强\u003C/strong> - 可以继续添加新功能\u003C/li>\n\u003C/ol>\n\u003Ch3 id=\"后续优化方向\">后续优化方向\u003C/h3>\n\u003Cul>\n\u003Cli>添加评论系统 (Giscus/Utterances)\u003C/li>\n\u003Cli>部署到私有服务器\u003C/li>\n\u003Cli>添加图片图床 (Cloudinary/Imgur)\u003C/li>\n\u003Cli>多作者支持\u003C/li>\n\u003Cli>CI/CD 优化\u003C/li>\n\u003C/ul>\n\u003Chr>\n\u003Cp>\u003Cstrong>博客地址：\u003C/strong> \u003Ca href=\"https://blog-system-six-sepia.vercel.app\">https://blog-system-six-sepia.vercel.app\u003C/a>\u003C/p>\n\u003Cp>\u003Cstrong>RSS 订阅：\u003C/strong> \u003Ca href=\"https://blog-system-six-sepia.vercel.app/rss.xml\">https://blog-system-six-sepia.vercel.app/rss.xml\u003C/a>\u003C/p>\n\u003Cp>\u003Cstrong>GitHub：\u003C/strong> \u003Ca href=\"https://github.com/LiCong-22/blog-system-\">https://github.com/LiCong-22/blog-system-\u003C/a>\u003C/p>",{"headings":287,"localImagePaths":430,"remoteImagePaths":431,"frontmatter":432,"imagePaths":436},[288,290,293,296,298,301,304,307,310,313,316,319,322,325,328,331,334,337,340,344,347,350,353,356,359,362,365,368,371,374,377,380,383,386,389,392,395,398,401,404,407,410,413,416,418,421,424,426,428],{"depth":56,"slug":289,"text":274},"从零搭建-ai-智能博客系统",{"depth":29,"slug":291,"text":292},"1-技术选型","1. 技术选型",{"depth":99,"slug":294,"text":295},"为什么选择这个方案","为什么选择这个方案？",{"depth":99,"slug":297,"text":297},"架构图",{"depth":29,"slug":299,"text":300},"2-初始化项目","2. 初始化项目",{"depth":99,"slug":302,"text":303},"21-创建-astro-项目","2.1 创建 Astro 项目",{"depth":99,"slug":305,"text":306},"22-项目结构","2.2 项目结构",{"depth":29,"slug":308,"text":309},"3-功能增强","3. 功能增强",{"depth":99,"slug":311,"text":312},"31-文章-frontmatter-定义","3.1 文章 Frontmatter 定义",{"depth":99,"slug":314,"text":315},"32-密码保护功能","3.2 密码保护功能",{"depth":99,"slug":317,"text":318},"33-搜索功能","3.3 搜索功能",{"depth":99,"slug":320,"text":321},"34-toc-目录","3.4 TOC 目录",{"depth":99,"slug":323,"text":324},"35-rss-订阅","3.5 RSS 订阅",{"depth":29,"slug":326,"text":327},"4-部署到-vercel","4. 部署到 Vercel",{"depth":99,"slug":329,"text":330},"41-推送代码到-github","4.1 推送代码到 GitHub",{"depth":99,"slug":332,"text":333},"42-vercel-部署","4.2 Vercel 部署",{"depth":29,"slug":335,"text":336},"5-mcp-server-实现","5. MCP Server 实现",{"depth":99,"slug":338,"text":339},"51-什么是-mcp","5.1 什么是 MCP？",{"depth":341,"slug":342,"text":343},4,"mcp-的核心概念","MCP 的核心概念",{"depth":341,"slug":345,"text":346},"mcp-vs-传统-api","MCP vs 传统 API",{"depth":99,"slug":348,"text":349},"52-mcp-核心组件","5.2 MCP 核心组件",{"depth":341,"slug":351,"text":352},"1-server","1. Server",{"depth":341,"slug":354,"text":355},"2-tool","2. Tool",{"depth":341,"slug":357,"text":358},"3-list_tools-装饰器","3. list_tools 装饰器",{"depth":341,"slug":360,"text":361},"4-call_tool-装饰器","4. call_tool 装饰器",{"depth":99,"slug":363,"text":364},"53-json-rpc-20-协议","5.3 JSON-RPC 2.0 协议",{"depth":99,"slug":366,"text":367},"54-安装依赖","5.4 安装依赖",{"depth":99,"slug":369,"text":370},"55-完整-server-实现","5.5 完整 Server 实现",{"depth":99,"slug":372,"text":373},"56-业务逻辑实现","5.6 业务逻辑实现",{"depth":99,"slug":375,"text":376},"57-传输模式","5.7 传输模式",{"depth":341,"slug":378,"text":379},"1-stdio-模式标准输入输出","1. Stdio 模式（标准输入输出）",{"depth":341,"slug":381,"text":382},"2-http--sse-模式","2. HTTP + SSE 模式",{"depth":29,"slug":384,"text":385},"6-远程访问cloudflare-tunnel","6. 远程访问：Cloudflare Tunnel",{"depth":99,"slug":387,"text":388},"61-问题背景","6.1 问题背景",{"depth":99,"slug":390,"text":391},"62-解决方案内网穿透","6.2 解决方案：内网穿透",{"depth":99,"slug":393,"text":394},"63-cloudflare-tunnel-原理","6.3 Cloudflare Tunnel 原理",{"depth":99,"slug":396,"text":397},"64-安装-cloudflared","6.4 安装 cloudflared",{"depth":99,"slug":399,"text":400},"65-启动-tunnel","6.5 启动 Tunnel",{"depth":99,"slug":402,"text":403},"66-其他内网穿透方案对比","6.6 其他内网穿透方案对比",{"depth":29,"slug":405,"text":406},"7-配置远程-ai-客户端","7. 配置远程 AI 客户端",{"depth":99,"slug":408,"text":409},"71-claude-desktop-配置","7.1 Claude Desktop 配置",{"depth":99,"slug":411,"text":412},"72-claude-code-cli-配置","7.2 Claude Code CLI 配置",{"depth":29,"slug":414,"text":415},"8-功能特性","8. 功能特性",{"depth":99,"slug":417,"text":417},"已实现功能",{"depth":29,"slug":419,"text":420},"9-常用命令","9. 常用命令",{"depth":29,"slug":422,"text":423},"10-总结","10. 总结",{"depth":99,"slug":425,"text":425},"技术栈总结",{"depth":99,"slug":427,"text":427},"核心优势",{"depth":99,"slug":429,"text":429},"后续优化方向",[],[],{"title":274,"description":275,"pubDate":433,"updatedDate":434,"tags":435},["Date","2026-01-05T00:00:00.000Z"],["Date","2026-01-05T00:00:00.000Z"],[46,279,20,79,280],[],"2026-01-05-从零搭建-ai-智能博客系统.md"]